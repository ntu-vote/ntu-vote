{"version":3,"sources":["component/Copyright.js","utility/login.js","component/SignInSide.js","utility/generateKey.js","utility/register.js","component/SignUpSide.js","component/SecondaryCampaignCard.js","component/Footer.js","component/Header.js","utility/getCampaignList.js","component/Campaigns.js","component/CandidateCard.js","utility/getCandidateList.js","utility/signMsg.js","utility/generateRandomStr.js","utility/getVoterKey.js","utility/castBallot.js","component/ButtonCircularProgress.js","component/ConfirmationDialog.js","component/VeriDialog.js","component/VoteStation.js","App.js","reportWebVitals.js","index.js"],"names":["Copyright","Typography","variant","color","align","Date","getFullYear","login","username","password","a","base_url","fetch","method","headers","response","ok","json","jsonResponse","status","localStorage","setItem","params","token","uid","alert","message","statusText","theme","createTheme","SignInSide","history","useHistory","handleSubmit","event","preventDefault","data","FormData","currentTarget","get","push","className","ThemeProvider","Grid","container","component","sx","height","CssBaseline","item","xs","sm","md","backgroundImage","process","backgroundRepeat","backgroundColor","t","palette","mode","grey","backgroundSize","backgroundPosition","Paper","elevation","square","Box","my","mx","display","flexDirection","alignItems","Avatar","m","src","alt","noValidate","onSubmit","mt","TextField","margin","required","fullWidth","id","label","name","autoComplete","autoFocus","type","FormControlLabel","control","Checkbox","value","Button","mb","Link","href","generateKey","passphrase","aName","aEmail","console","log","openpgp","curve","userIDs","email","format","privateKey","publicKey","revocationCertificate","register","display_name","real_name","student_id","newKeyPair","JSON","stringify","publicKeyArmored","privateKeyArmored","body","SignUpSide","test","SecondaryCampaignCard","props","campaign","showDuration","showResult","redirectUri","cpnId","CardActionArea","Card","style","CardContent","flex","gutterBottom","title","paragraph","marginLeft","marginRight","description","CardMedia","width","image","Footer","bgcolor","p","Header","position","top","bottom","right","left","pr","getCampaignList","getItem","result","campaigns","Campaigns","useState","campaignList","setCampaignList","loading","setLoading","startTime","slice","endTime","useEffect","length","noWrap","AppBar","background","Toolbar","justifyContent","onClick","removeItem","border","pt","pb","Container","maxWidth","py","spacing","map","cpn_id","CandidateCard","candidate","live","handleSelect","campaignStatus","policies","policy","idx","inline","paddingLeft","ballots","size","getCandidateList","endpoint","signMsg","keyPair","aMessage","armoredKey","pubKey","_publicKey","prvKey","decryptKey","_privateKey","text","unsignedMessage","signingKeys","cleartextMessage","signedMessage","verificationKeys","verificationResult","signatures","verified","keyID","Error","generateRandomStr","characters","charactersLength","i","charAt","Math","floor","random","getVoterKey","castBallot","cid","veriStr","votedMsg","ballotMsg","votedProof","ballotProof","styles","ButtonCircularProgress","pl","CircularProgress","thickness","ConfirmationDialog","open","onClose","onConfirm","useRef","Dialog","disableEscapeKeyDown","DialogTitle","DialogContent","DialogContentText","inputRef","DialogActions","Stack","direction","current","disabled","VeriDialog","action","content","VoteStation","currentUrl","window","location","URLSearchParams","search","setCampaign","candidateList","setCandidateList","isDialogOpen","setIsDialogOpen","isDialogLoading","setIsDialogLoading","isVeriDialogOpen","setIsVeriDialogOpen","setVeriStr","selectedCandidate","setSelectedCandidate","useCallback","closeDialog","closeVeriDialog","handleCastBallot","candidates","campaignInfo","reload","cpnr_id","rule","App","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wXAGe,SAASA,IACpB,OACE,eAACC,EAAA,EAAD,CAAYC,QAAQ,QAAQC,MAAM,iBAAiBC,MAAM,SAAzD,UACG,kBADH,WAGG,KACA,IAAIC,MAAOC,cACX,OCVT,IAGaC,EAAK,uCAAG,WAAMC,EAAUC,GAAhB,iBAAAC,EAAA,4DACAC,oCADA,kBAIUC,MAHVD,oCAG0B,CACnCE,OAAQ,OACRC,QAAS,CACL,OAAU,mBACV,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BN,EAA3B,YAAuCC,MATlC,YAIPM,EAJO,QAYAC,GAZA,iCAakBD,EAASE,OAb3B,UAcmB,aADtBC,EAbG,QAcQC,OAdR,wBAeLC,aAAaC,QAAQ,QAASH,EAAaI,OAAOC,OAClDH,aAAaC,QAAQ,WAAYH,EAAaI,OAAOd,UACrDY,aAAaC,QAAQ,MAAOH,EAAaI,OAAOE,KAjB3C,kBAkBE,WAlBF,eAqBLC,MAAMP,EAAaQ,SArBd,kBAsBE,QAtBF,uCA0BTD,MAAMV,EAASI,OAAS,IAAMJ,EAASY,YA1B9B,kBA2BF,QA3BE,iEA+BbF,MAAM,4EA/BO,kBAgCN,QAhCM,0DAAH,wDCgBZG,EAAQC,cAEC,SAASC,IACtB,IAAMC,EAAUC,cAEVC,EAAY,uCAAG,WAAOC,GAAP,eAAAxB,EAAA,6DACnBwB,EAAMC,iBACAC,EAAO,IAAIC,SAASH,EAAMI,eAFb,SAGE/B,EACjB6B,EAAKG,IAAI,YAAYH,EAAKG,IAAI,aAJf,OAOH,YAPG,QAQfR,EAAQS,KAAK,SARE,2CAAH,sDAYlB,OACE,wBAAQC,UAAU,aAAlB,SACI,cAACC,EAAA,EAAD,CAAed,MAAOA,EAAtB,SACA,eAACe,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,OAAOC,GAAI,CAAEC,OAAQ,SAA/C,UACI,cAACC,EAAA,EAAD,IACA,cAACL,EAAA,EAAD,CACAM,MAAI,EACJC,IAAI,EACJC,GAAI,EACJC,GAAI,EACJN,GAAI,CACAO,gBAAgB,OAAD,OAASC,GAAT,oBACfC,iBAAkB,YAClBC,gBAAiB,SAACC,GAAD,MACE,UAAnBA,EAAEC,QAAQC,KAAmBF,EAAEC,QAAQE,KAAK,IAAMH,EAAEC,QAAQE,KAAK,MACjEC,eAAgB,QAChBC,mBAAoB,YAGxB,cAACnB,EAAA,EAAD,CAAMM,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGP,UAAWkB,IAAOC,UAAW,EAAGC,QAAM,EAAvE,SACA,eAACC,EAAA,EAAD,CACIpB,GAAI,CACJqB,GAAI,EACJC,GAAI,EACJC,QAAS,OACTC,cAAe,SACfC,WAAY,UANhB,UASI,cAACC,EAAA,EAAD,CAAQ1B,GAAI,CAAE2B,EAAG,GAAjB,SAEI,qBAAKC,IAA8B,qBAC/BC,IAAI,yBAGZ,cAAC1E,EAAA,EAAD,CAAY4C,UAAU,KAAK3C,QAAQ,KAAnC,0BAGA,eAACgE,EAAA,EAAD,CAAKrB,UAAU,OAAO+B,YAAU,EAACC,SAAU5C,EAAca,GAAI,CAAEgC,GAAI,GAAnE,UACA,cAACC,EAAA,EAAD,CACIC,OAAO,SACPC,UAAQ,EACRC,WAAS,EACTC,GAAG,WACHC,MAAM,+DACNC,KAAK,WACLC,aAAa,WACbC,WAAS,IAEb,cAACR,EAAA,EAAD,CACIC,OAAO,SACPC,UAAQ,EACRC,WAAS,EACTG,KAAK,WACLD,MAAM,eACNI,KAAK,WACLL,GAAG,WACHG,aAAa,qBAEjB,cAACG,EAAA,EAAD,CACIC,QAAS,cAACC,EAAA,EAAD,CAAUC,MAAM,WAAWzF,MAAM,YAC1CiF,MAAM,6BAEV,cAACS,EAAA,EAAD,CACIL,KAAK,SACLN,WAAS,EACThF,QAAQ,YACR4C,GAAI,CAAEgC,GAAI,EAAGgB,GAAI,GAJrB,0BAQA,eAACnD,EAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACD,EAAA,EAAD,CAAMM,MAAI,EAACC,IAAE,EAAb,SACA,cAAC6C,EAAA,EAAD,CAAMC,KAAK,IAAI9F,QAAQ,QAAvB,yCAIA,cAACyC,EAAA,EAAD,CAAMM,MAAI,EAAV,SACA,cAAC8C,EAAA,EAAD,CAAMC,KAAK,YAAY9F,QAAQ,QAA/B,SACK,sDAIT,cAACF,EAAD,CAAW8C,GAAI,CAAEgC,GAAI,oB,YCrHxBmB,EAAW,uCAAG,WAAMC,EAAYC,EAAOC,GAAzB,qBAAA1F,EAAA,6DACzB2F,QAAQC,IAAI,sBADa,kBAGwCC,cAAoB,CACjFf,KAAM,MACNgB,MAAO,aACPC,QAAS,CAAC,CAAEpB,KAAMc,EAAOO,MAAON,IAChCF,WAAYA,EACZS,OAAQ,YARa,uBAGfC,EAHe,EAGfA,WAAYC,EAHG,EAGHA,UAAWC,EAHR,EAGQA,sBAHR,kBAUf,CACN,kBAAqBF,EACrB,iBAAoBC,EACpB,SAAYC,IAbS,2DAkBhB,QAlBgB,0DAAH,0DCEXC,EAAQ,uCAAG,WAAMvG,EAAUC,EAAUuG,EAAcC,EAAWC,GAAnD,uBAAAxG,EAAA,6DACd0F,EAASc,EAAa,cADR,SAEKjB,EAAYxF,EAAUD,EAAU4F,GAFrC,cAEde,EAFc,OAGHxG,uCACXyB,EAAOgF,KAAKC,UAAU,CACxB,SAAY7G,EACZ,SAAYC,EACZ,aAAgBuG,EAChB,UAAaC,EACb,WAAcC,EACd,WAAcC,EAAWG,iBACzB,YAAeH,EAAWI,oBAXV,SAaG3G,MAVND,uCAUsB,CACnCE,OAAQ,OACR2G,KAAMpF,EACNtB,QAAS,CACL,OAAU,mBACV,eAAgB,sBAlBJ,YAadC,EAbc,QAqBPC,GArBO,kCAsBWD,EAASE,OAtBpB,WAuBY,aADtBC,EAtBU,QAuBCC,OAvBD,0CAwBL,WAxBK,eA2BZM,MAAMP,EAAaQ,SA3BP,kBA4BL,QA5BK,uCAgChBD,MAAMV,EAASI,OAAS,IAAMJ,EAASY,YAhCvB,kBAiCT,QAjCS,4CAAH,8DCYfC,EAAQC,cAEC,SAAS4F,IACtB,IAAM1F,EAAUC,cACVC,EAAY,uCAAG,WAAOC,GAAP,eAAAxB,EAAA,yDACnBwB,EAAMC,iBACAC,EAAO,IAAIC,SAASH,EAAMI,eAGT,qBACiBoF,KAAKtF,EAAKG,IAAI,cANnC,uBAQfd,MAAM,wCARS,6BAaG,iBACgBiG,KAAKtF,EAAKG,IAAI,aAdjC,wBAgBfd,MAAM,oDAhBS,4CAqBEsF,EAAS3E,EAAKG,IAAI,YAAaH,EAAKG,IAAI,YAC7DH,EAAKG,IAAI,eAAgBH,EAAKG,IAAI,YAClCH,EAAKG,IAAI,cAvBU,QAwBL,YAxBK,SAyBfd,MAAM,4BACNM,EAAQS,KAAK,WA1BE,4CAAH,sDA8BlB,OACE,wBAAQC,UAAU,aAAlB,SACI,cAACC,EAAA,EAAD,CAAed,MAAOA,EAAtB,SACA,eAACe,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,OAAOC,GAAI,CAAEC,OAAQ,SAA/C,UACI,cAACC,EAAA,EAAD,IACA,cAACL,EAAA,EAAD,CACAM,MAAI,EACJC,IAAI,EACJC,GAAI,EACJC,GAAI,EACJN,GAAI,CACAO,gBAAgB,OAAD,OAASC,GAAT,0BACfC,iBAAkB,YAClBC,gBAAiB,SAACC,GAAD,MACE,UAAnBA,EAAEC,QAAQC,KAAmBF,EAAEC,QAAQE,KAAK,IAAMH,EAAEC,QAAQE,KAAK,MACjEC,eAAgB,QAChBC,mBAAoB,YAGxB,cAACnB,EAAA,EAAD,CAAMM,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGP,UAAWkB,IAAOC,UAAW,EAAGC,QAAM,EAAvE,SACA,eAACC,EAAA,EAAD,CACIpB,GAAI,CACJqB,GAAI,EACJC,GAAI,EACJC,QAAS,OACTC,cAAe,SACfC,WAAY,UANhB,UASI,cAACC,EAAA,EAAD,CAAQ1B,GAAI,CAAE2B,EAAG,GAAjB,SAEI,qBAAKC,IAA8B,qBAC/BC,IAAI,yBAGZ,cAAC1E,EAAA,EAAD,CAAY4C,UAAU,KAAK3C,QAAQ,KAAnC,0BAGA,eAACgE,EAAA,EAAD,CAAKrB,UAAU,OAAO+B,YAAU,EAACC,SAAU5C,EAAca,GAAI,CAAEgC,GAAI,GAAnE,UACA,cAACC,EAAA,EAAD,CACIC,OAAO,SACPC,UAAQ,EACRC,WAAS,EACTC,GAAG,WACHC,MAAM,4KACNC,KAAK,WACLC,aAAa,WACbC,WAAS,IAEb,cAACR,EAAA,EAAD,CACIC,OAAO,SACPC,UAAQ,EACRC,WAAS,EACTC,GAAG,cACHC,MAAM,eACNC,KAAK,cACLC,aAAa,gBAEjB,cAACP,EAAA,EAAD,CACIC,OAAO,SACPC,UAAQ,EACRC,WAAS,EACTC,GAAG,WACHC,MAAM,2BACNC,KAAK,WACLC,aAAa,aAEjB,cAACP,EAAA,EAAD,CACIC,OAAO,SACPC,UAAQ,EACRC,WAAS,EACTC,GAAG,YACHC,MAAM,kEACNC,KAAK,YACLC,aAAa,cAEjB,cAACP,EAAA,EAAD,CACIC,OAAO,SACPC,UAAQ,EACRC,WAAS,EACTG,KAAK,WACLD,MAAM,eACNI,KAAK,WACLL,GAAG,WACHG,aAAa,qBAEjB,cAACO,EAAA,EAAD,CACIL,KAAK,SACLN,WAAS,EACThF,QAAQ,YACR4C,GAAI,CAAEgC,GAAI,EAAGgB,GAAI,GAJrB,0BAQA,eAACnD,EAAA,EAAD,CAAMC,WAAS,EAAf,UACI,cAACD,EAAA,EAAD,CAAMM,MAAI,EAACC,IAAE,IAEb,cAACP,EAAA,EAAD,CAAMM,MAAI,EAAV,SACA,cAAC8C,EAAA,EAAD,CAAMC,KAAK,SAAS9F,QAAQ,QAA5B,SACK,8EAIT,cAACF,EAAD,CAAW8C,GAAI,CAAEgC,GAAI,oB,2EChJtB,SAAS6C,EAAsBC,GAC1C,IAAQC,EAAuCD,EAAvCC,SAAUC,EAA6BF,EAA7BE,aAAcC,EAAeH,EAAfG,WAC1BC,EAAc,sBAAuBH,EAASI,MACpD,OACE,cAACtF,EAAA,EAAD,CAAMM,MAAI,EAACC,GAAI,GAAIE,GAAI,GAAvB,SACE,cAAC8E,EAAA,EAAD,CAAgBrF,UAAU,IAAImD,KAAMgC,EAApC,SACE,eAACG,EAAA,EAAD,CAAMrF,GAAI,CAAEuB,QAAS,QAAU+D,MAAO,CAAC5E,gBAAiB,WAAxD,UACE,eAAC6E,EAAA,EAAD,CAAavF,GAAI,CAAEwF,KAAM,GAAzB,UACE,cAACrI,EAAA,EAAD,CAAY4C,UAAU,KAAK3C,QAAQ,KAAKqI,cAAY,EAApD,SACGV,EAASW,QAEZ,cAACvI,EAAA,EAAD,CAAYC,QAAQ,KAAKuI,WAAS,EAAC3F,GAAI,CAAE4F,WAAY,OAAQC,YAAa,QAA1E,SACGd,EAASe,cAEZ,cAAC3I,EAAA,EAAD,CAAYC,QAAQ,YAAYuI,WAAS,EAAzC,SAEGX,EAAaD,KAEhB,cAAC5H,EAAA,EAAD,CAAYC,QAAQ,YAAYC,MAAM,UAAUsI,WAAS,EAAzD,SACGV,EAAWF,QAGhB,cAACgB,EAAA,EAAD,CACEhG,UAAU,MACVC,GAAI,CAAEgG,MAAO,IAAKzE,QAAS,CAAEnB,GAAI,QAASC,GAAI,UAC9C4F,MAAM,qCACNpE,IAAI,kCC9BH,SAASqE,IACpB,OACI,eAAC9E,EAAA,EAAD,CAAKpB,GAAI,CAAEmG,QAAS,mBAAoBC,EAAG,GAAKrG,UAAU,SAA1D,UACA,cAAC5C,EAAA,EAAD,CACEC,QAAQ,YACRE,MAAM,SACND,MAAM,iBACN0C,UAAU,IAJZ,0CAQA,cAAC7C,EAAD,OCXO,SAASmJ,EAAOvB,GAC3B,OACI,eAAC7D,EAAA,EAAD,CACAjB,GAAI,CACAsG,SAAU,WACV5F,gBAAiB,WACjBrD,MAAO,OACP2F,GAAI,EACJjC,eAAgB,QAChBN,iBAAkB,YAClBO,mBAAoB,SACpBT,gBAAgB,2CATpB,UAYC,qBAAK+E,MAAO,CAAE/D,QAAS,QACpBK,IAAI,0CACJC,IAAI,yBACR,cAACT,EAAA,EAAD,CACIpB,GAAI,CACJsG,SAAU,WACVC,IAAK,EACLC,OAAQ,EACRC,MAAO,EACPC,KAAM,EACNhG,gBAAiB,oBAGrB,cAACb,EAAA,EAAD,CAAMC,WAAS,EAAf,SACI,cAACD,EAAA,EAAD,CAAMM,MAAI,EAACG,GAAI,EAAf,SACA,cAACc,EAAA,EAAD,CACIpB,GAAI,CACJsG,SAAU,WACVF,EAAG,CAAEhG,GAAI,EAAGE,GAAI,GAChBqG,GAAI,CAAErG,GAAI,aCtC1B,IAGasG,EAAe,uCAAG,8BAAAhJ,EAAA,4DACVC,uCACjB0F,QAAQC,IAAI,wBAFe,kBAIA1F,MAHVD,uCAG0B,CACnCE,OAAQ,MACRC,QAAS,CACL,OAAU,mBACV,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BM,aAAauI,QAAQ,YAAhD,YAA+DvI,aAAauI,QAAQ,aATrE,YAIjB5I,EAJiB,QAYVC,GAZU,iCAaQD,EAASE,OAbjB,UAcS,aADtBC,EAba,QAcFC,OAdE,0CAeRD,EAAa0I,OAAOC,WAfZ,eAkBfpI,MAAMP,EAAaQ,SAlBJ,kBAmBR,QAnBQ,uCAuBnBD,MAAMV,EAASI,OAAS,IAAMJ,EAASY,YAvBpB,kBAwBZ,QAxBY,iEA4BvBF,MAAM,0KA5BiB,kBA6BhB,QA7BgB,0DAAH,qDCmBtBG,EAAQC,cAEC,SAASiI,IACtB,MAAwCC,mBAAS,IAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACMpI,EAAUC,cAEV+F,EAAa,SAACF,GAClB,GAAwB,UAApBA,EAAS1G,OACX,MAAM,uCAAN,OACa0G,EAAS+B,OADtB,YAKE9B,EAAe,SAACD,GACpB,MAAwB,UAApBA,EAAS1G,OAET,iCAII,iCAAN,OACU0G,EAASuC,UAAUC,MAAM,GAAI,GADvC,mBAC+CxC,EAASyC,QAAQD,MAAM,GAAI,KA0B9E,OAdAE,qBAAU,WACRJ,GAAW,GACX,sBAAC,4BAAAzJ,EAAA,sEACyBgJ,IADzB,OAEmB,UADZG,EADP,QAGG9H,EAAQS,KAAK,UAGbyH,EAAgBJ,GAElBM,GAAW,GARZ,0CAAD,KAUC,CAACpI,IAEAmI,EAEA,GAGwB,IAAxBF,EAAaQ,OAEb,cAACvK,EAAA,EAAD,CAAYC,QAAQ,KAAKC,MAAM,UAAUsK,QAAM,EAA/C,sFAOF,eAAC/H,EAAA,EAAD,CAAed,MAAOA,EAAtB,UACE,cAACoB,EAAA,EAAD,IACA,cAAC0H,EAAA,EAAD,CAAQtB,SAAS,WAAWhB,MAAO,CAAEuC,WAAY,WAAjD,SACE,eAACC,EAAA,EAAD,WACE,cAACjI,EAAA,EAAD,CAAMC,WAAS,EAACiI,eAAe,aAA/B,SACE,cAAC5K,EAAA,EAAD,CAAYC,QAAQ,KAAKC,MAAM,UAAUsK,QAAM,EAA/C,wBAIF,cAAC9H,EAAA,EAAD,CAAMC,WAAS,EAACiI,eAAe,WAA/B,SACE,cAAChF,EAAA,EAAD,CAAQ3F,QAAQ,WAAW4K,QA7ChB,WACnB1J,aAAa2J,WAAW,SACxB3J,aAAa2J,WAAW,YACxB3J,aAAa2J,WAAW,OACxBhJ,EAAQS,KAAK,WA0CH4F,MAAO,CAAEjI,MAAO,UAAW6K,OAAQ,mBADrC,iCAQN,iCACE,cAAC7B,EAAD,IAQA,cAACjF,EAAA,EAAD,CACEpB,GAAI,CACFmG,QAAS,mBACTgC,GAAI,EACJC,GAAI,GAJR,SAOE,eAACC,EAAA,EAAD,CAAWC,SAAS,KAApB,UACE,eAACnL,EAAA,EAAD,CACE4C,UAAU,KACV3C,QAAQ,KACRE,MAAM,SACND,MAAM,eACNoI,cAAY,EALd,sBAOW,uBAPX,sDASA,cAACtI,EAAA,EAAD,CAAYC,QAAQ,KAAKE,MAAM,SAASD,MAAM,iBAAiBsI,WAAS,EAAxE,2IAMJ,cAAC0C,EAAA,EAAD,CAAWrI,GAAI,CAAEuI,GAAI,GAArB,SACE,cAAC1I,EAAA,EAAD,CAAMC,WAAS,EAAC0I,QAAS,EAAzB,SACGtB,EAAaK,MAAM,GAAGkB,KAAI,SAAC1D,GAAD,OACzB,cAACF,EAAD,CAEEE,SAAUA,EACVC,aAAcA,EACdC,WAAYA,GAHPF,EAAS2D,kBAiDxB,cAACxC,EAAD,O,YClLS,SAASyC,EAAc7D,GAClC,IAAQ8D,EAAkD9D,EAAlD8D,UAAWC,EAAuC/D,EAAvC+D,KAAMC,EAAiChE,EAAjCgE,aAAcC,EAAmBjE,EAAnBiE,eAEvC,OACE,cAAClJ,EAAA,EAAD,CAAMM,MAAI,EAACC,GAAI,GAAIE,GAAI,GAAvB,SACE,eAAC+E,EAAA,EAAD,CAAMrF,GAAI,CAAEuB,QAAS,QAAU+D,MAAO,CAAC5E,gBAAiB,WAAxD,UACE,cAACqF,EAAA,EAAD,CACEhG,UAAU,MACVC,GAAI,CAAEgG,MAAO,IAAKzE,QAAS,CAAEnB,GAAI,QAASC,GAAI,UAC9C4F,MAAM,uCAER,eAACV,EAAA,EAAD,CAAavF,GAAI,CAAEwF,KAAM,GAAzB,UAEE,cAACrI,EAAA,EAAD,CAAYC,QAAQ,KAAKqI,cAAY,EAArC,SACGmD,EAAUrG,OAGb,cAACpF,EAAA,EAAD,CAAYC,QAAQ,KAAKqI,cAAY,EAArC,SACGmD,EAAU9C,cAGZ8C,EAAUI,SAASP,KAAI,SAACQ,EAAQC,GAAT,OACtB,eAAC,WAAD,WACE,eAAC/L,EAAA,EAAD,CAAYC,QAAQ,KAAKuI,WAAS,EAACwD,OAAO,OAAO7L,MAAM,OAAO8L,YAAY,OAA1E,UACGF,EAAI,EADP,IACWD,EAAOvD,SAElB,cAACvI,EAAA,EAAD,CAAYwI,WAAS,EAACwD,OAAO,OAAO7L,MAAM,OAA1C,SACG2L,EAAOnD,oBAKb+C,GACC,eAAC1L,EAAA,EAAD,CAAYC,QAAQ,YAAYuI,WAAS,EAACtI,MAAM,UAAhD,qCACOuL,EAAUS,QADjB,aAImB,UAAnBN,GACA,cAAChG,EAAA,EAAD,CAAQ3F,QAAQ,UAAUkM,KAAK,QAC7BhE,MAAO,CAAEjI,MAAO,UAAW6K,OAAQ,mBACnCF,QAAU,WAAQc,EAAaF,IAFjC,kCC/Cd,IAGaW,EAAgB,uCAAG,WAAMpE,GAAN,mBAAAvH,EAAA,6DACtB4L,EAAW3L,wCAA8BsH,EAC/C5B,QAAQC,IAAI,yBAFgB,kBAID1F,MAAM0L,EAAU,CACnCzL,OAAQ,MACRC,QAAS,CACL,OAAU,mBACV,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BM,aAAauI,QAAQ,YAAhD,YAA+DvI,aAAauI,QAAQ,aATpE,YAIlB5I,EAJkB,QAaXC,GAbW,iCAcOD,EAASE,OAdhB,UAeQ,aADtBC,EAdc,QAeHC,OAfG,0CAgBTD,EAAa0I,QAhBJ,eAmBhBnI,MAAMP,EAAaQ,SAnBH,kBAoBT,QApBS,uCAwBpBD,MAAMV,EAASI,OAAS,IAAMJ,EAASY,YAxBnB,kBAyBb,QAzBa,iEA6BxBF,MAAM,6KA7BkB,kBA8BjB,QA9BiB,0DAAH,sDCDhB8K,EAAO,uCAAG,WAAMC,EAAStG,EAAYuG,GAA3B,+BAAA/L,EAAA,6DACnB2F,QAAQC,IAAI,uBADO,SAEMC,UAAgB,CACvCmG,WAAYF,EAAQG,SAHH,cAEbC,EAFa,YAMOrG,EANP,SAOGA,iBAAuB,CACvCmG,WAAYF,EAAQK,SARP,+BAUf3G,EAVe,MAOfU,WAPe,KAUfV,WAVe,qBAMe4G,WANf,+BAMbC,EANa,iBAaWxG,yBAA+B,CAAEyG,KAAMP,IAblD,eAabQ,EAba,iBAcY1G,OAAa,CACxC7E,QAASuL,EACTC,YAAaH,IAhBE,eAcbI,EAda,iBAmBS5G,uBAA6B,CACvD4G,qBApBiB,eAmBbC,EAnBa,iBAuBc7G,SAAe,CAC9C7E,QAAS0L,EACTC,iBAAkBT,IAzBD,eAuBbU,EAvBa,SA4BSA,EAAmBC,WAAW,GAAlDC,EA5BW,EA4BXA,SAAUC,EA5BC,EA4BDA,MA5BC,oBA8BTD,EA9BS,iCA+BRL,GA/BQ,yCAiCf9G,QAAQC,IAAI,mBAAoBmH,GAC1B,IAAIC,MAAM,oCAAsC,KAAEhM,SAlCzC,2DAAH,0DCFPiM,EAAoB,SAACnD,GAChCnE,QAAQC,IAAI,+BAIZ,IAHA,IAAIsD,EAAS,GACTgE,EAAa,iEACbC,EAAmBD,EAAWpD,OACxBsD,EAAI,EAAGA,EAAItD,EAAQsD,IAC3BlE,GAAUgE,EAAWG,OAAOC,KAAKC,MAAMD,KAAKE,SAC1CL,IAEJ,OAAOjE,GCNIuE,EAAW,uCAAG,8BAAAzN,EAAA,6DACvB2F,QAAQC,IAAI,qBADW,SAIF3F,yCAJE,SAKIC,MADND,yCACsB,CACnCE,OAAQ,MACRC,QAAS,CACL,OAAU,mBACV,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BM,aAAauI,QAAQ,YAAhD,YAA+DvI,aAAauI,QAAQ,aAVzE,YAKb5I,EALa,QAcNC,GAdM,iCAeYD,EAASE,OAfrB,UAgBa,aADtBC,EAfS,QAgBEC,OAhBF,0CAiBJD,EAAa0I,QAjBT,eAoBXnI,MAAMP,EAAaQ,SApBR,kBAqBJ,QArBI,uCAyBfD,MAAMV,EAASI,OAAS,IAAMJ,EAASY,YAzBxB,kBA0BR,QA1BQ,mFA+BZ,QA/BY,0DAAH,qDCIXyM,GAAU,uCAAG,WAAMnG,EAAOoG,EAAK5N,GAAlB,+BAAAC,EAAA,6DACtB2F,QAAQC,IAAI,sBADU,SAGZgI,EAAUX,EAAkB,GAHhB,SAIIQ,IAJJ,cAIZ3B,EAJY,OAKZ+B,EALY,gBAKQnN,aAAauI,QAAQ,OAL7B,YAKuC1B,GACnDuG,EANY,iBAMUF,EANV,YAMqBrG,EANrB,YAM8BoG,GAN9B,UAOO9B,EAAQC,EAAS/L,EAAU8N,GAPlC,eAOZE,EAPY,iBAQQlC,EAAQC,EAAS/L,EAAU+N,GARnC,eAQZE,EARY,OASD/N,0CACXyB,EAAOgF,KAAKC,UAAW,CACzB,MAASY,EACT,IAAOoG,EACP,WAAcI,EACd,YAAeC,IAdD,UAgBK9N,MAPND,0CAOsB,CACnCE,OAAQ,OACR2G,KAAMpF,EACNtB,QAAS,CACL,OAAU,mBACV,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BM,aAAauI,QAAQ,YAAhD,YAA+DvI,aAAauI,QAAQ,aAtB1E,aAgBZ5I,EAhBY,QA0BLC,GA1BK,kCA2BaD,EAASE,OA3BtB,WA4Bc,aADtBC,EA3BQ,QA4BGC,OA5BH,0CA6BHmN,GA7BG,WAgCV7M,MAAMP,EAAaQ,SACS,oBAAzBR,EAAaQ,QAjCN,wBAkCND,MAAM,gKAlCA,kBAmCC,WAnCD,cAqCkB,4BAAzBP,EAAaQ,SACZD,MAAM,kFAtCA,kBAwCH,QAxCG,uCA4CdA,MAAMV,EAASI,OAAS,IAAMJ,EAASY,YA5CzB,kBA6CP,QA7CO,mFAkDX,QAlDW,0DAAH,0D,qECHjBgN,GAAS,CACbxO,MAAO,WAGM,SAASyO,GAAuBhH,GAC7C,IAAQwE,EAASxE,EAATwE,KACR,OACE,cAAClI,EAAA,EAAD,CAAK/D,MAAM,iBAAiB0O,GAAI,IAAKxK,QAAQ,OAA7C,SACE,cAACyK,GAAA,EAAD,CACEhM,GAAE,gBAAM6L,IACRvC,KAAMA,GAAc,GACpB2C,UAAW3C,EAAQA,EAAO,EAAK,GAAK,M,cCJ7B,SAAS4C,GAAmBpH,GACzC,IAAQqH,EAA4CrH,EAA5CqH,KAAMC,EAAsCtH,EAAtCsH,QAAShF,EAA6BtC,EAA7BsC,QAAS7E,EAAoBuC,EAApBvC,KAAM8J,EAAcvH,EAAduH,UAChC1O,EAAW2O,mBAKjB,OACI,eAACC,GAAA,EAAD,CACAJ,KAAMA,EACNC,QAASA,EACTI,qBAAsBpF,EAHtB,UAKA,cAACqF,GAAA,EAAD,uCACA,eAACC,GAAA,EAAD,WACI,eAACC,GAAA,EAAD,sCAAwBpK,EAAxB,0FACA,cAACN,EAAA,EAAD,CACIC,OAAO,SACPC,UAAQ,EACRC,WAAS,EACTG,KAAK,WACLD,MAAM,eACNsK,SAAUjP,EACV+E,KAAK,WACLL,GAAG,WACHG,aAAa,wBAGrB,cAACqK,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CACE9M,GAAI,CAAEmI,GAAI,GACV4E,UAAU,MACVvE,QAAS,EACTT,eAAe,SAJjB,UAME,eAAChF,EAAA,EAAD,CACE3F,QAAQ,YACR4K,QAlCY,WACpBqE,EAAU1O,EAASqP,QAAQlK,QAkCnBmK,SAAU7F,EACV9B,MAAO,CAAEuC,WAAY,WAJvB,sCAMQT,GAAW,cAAC0E,GAAD,OAEnB,cAAC/I,EAAA,EAAD,CACE3F,QAAQ,WACR4K,QAASoE,EACTa,SAAU7F,EACV9B,MAAO,CAAEjI,MAAO,UAAW6K,OAAQ,mBAJrC,kCC9CK,SAASgF,GAAWpI,GACjC,IAAQqH,EAAyCrH,EAAzCqH,KAAMC,EAAmCtH,EAAnCsH,QAAS1G,EAA0BZ,EAA1BY,MAAOyH,EAAmBrI,EAAnBqI,OAAQC,EAAWtI,EAAXsI,QAEtC,OACI,eAACb,GAAA,EAAD,CACAJ,KAAMA,EACNC,QAASA,EAFT,UAIA,eAACK,GAAA,EAAD,kDAAoB/G,KACpB,cAACgH,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,UAAoBS,MAEtB,cAACP,GAAA,EAAD,UACE,cAAC9J,EAAA,EAAD,CACE3F,QAAQ,YACR4K,QAASoE,EACT9G,MAAO,CAAEuC,WAAY,WAHvB,SAKGsF,S,sBCPLrO,GAAQC,cAEC,SAASsO,GAAYvI,GAClC,IAAMwI,EAAaC,OAAOC,SACpBrI,EAAQ,IAAIsI,gBAAgBH,EAAWI,QAAQjO,IAAI,SACzD,EAAgCwH,mBAAS,MAAzC,mBAAOlC,EAAP,KAAiB4I,EAAjB,KACA,EAA0C1G,mBAAS,IAAnD,mBAAO2G,EAAP,KAAsBC,EAAtB,KACA,EAA8B5G,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAAwCJ,oBAAS,GAAjD,mBAAO6G,EAAP,KAAqBC,EAArB,KACA,EAA8C9G,oBAAS,GAAvD,mBAAO+G,EAAP,KAAwBC,EAAxB,KACA,EAAgDhH,oBAAS,GAAzD,mBAAOiH,EAAP,KAAyBC,EAAzB,KACA,EAA8BlH,oBAAS,GAAvC,mBAAOuE,EAAP,KAAgB4C,EAAhB,KACA,EAAkDnH,mBAAS,CAAC1E,KAAK,YAAjE,mBAAO8L,EAAP,KAA0BC,EAA1B,KAEMrP,GAAUC,cAEV+F,GAAasJ,uBAAY,SAACxJ,GAC9B,GAAwB,UAApBA,EAAS1G,OACX,MAAM,uCAAN,OACa0G,EAAS+B,OADtB,aAGC,IAGC9B,GAAeuJ,uBAAY,SAACxJ,GAChC,MAAwB,UAApBA,EAAS1G,OAET,iCAII,iCAAN,OACU0G,EAASuC,UAAUC,MAAM,GAAI,GADvC,mBAC+CxC,EAASyC,QAAQD,MAAM,GAAI,MAEzE,IAGCuB,GAAeyF,uBAAY,SAAC3F,GAChCmF,GAAgB,GAChBO,EAAqB1F,KAClB,CAACmF,EAAiBO,IAIjBE,GAAcD,uBAAY,WAC9BR,GAAgB,GAChBE,GAAmB,KAClB,CAACF,EAAiBE,IAGfQ,GAAkBF,uBAAY,WAClCJ,GAAoB,KACnB,IAGGO,GAAmBH,uBAAY,SAAC5Q,GACpC,sBAAC,4BAAAC,EAAA,6DACCqQ,GAAmB,GADpB,SAEuB3C,GAAWvG,EAASI,MAAOkJ,EAAkB9C,IAAK5N,GAFzE,OAEO6N,EAFP,OAGCgD,KACe,SAAZhD,EACD7M,MAAM,4BAEY,YAAZ6M,EACNvM,GAAQS,KAAK,WAGbf,MAAM,6BACNyP,EAAW5C,GACX2C,GAAoB,IAbvB,0CAAD,KAgBG,CAACE,EAAmBG,KA0BzB,OAhBA/G,qBAAU,WACR,sBAAC,kCAAA7J,EAAA,6DACCyJ,GAAW,GADZ,SAEsBkC,EAAiBpE,GAFvC,OAGgB,UADT2B,EAFP,QAIG7H,GAAQS,KAAK,WAEV,EACiCoH,EAAO/B,SAAtC4J,EADH,EACGA,WAAeC,EADlB,kBAEFjB,EAAYiB,GACZf,EAAiBc,IAEnBtH,GAAW,GAXZ,0CAAD,KAaC,CAAClC,EAAOlG,KAEPmI,EAEA,GAIyB,IAAzBwG,EAAclG,OAEd,cAACvK,EAAA,EAAD,CAAYC,QAAQ,KAAKC,MAAM,UAAUsK,QAAM,EAA/C,4IAOF,eAAC/H,EAAA,EAAD,CAAed,MAAOA,GAAtB,UACE,cAACoB,EAAA,EAAD,IACA,cAAC0H,EAAA,EAAD,CAAQtB,SAAS,WAAWhB,MAAO,CAAEuC,WAAY,WAAjD,SACE,eAACC,EAAA,EAAD,WACE,cAACjI,EAAA,EAAD,CAAMC,WAAS,EAACiI,eAAe,aAA/B,SACE,cAAC5K,EAAA,EAAD,CAAYC,QAAQ,KAAKC,MAAM,UAAUsK,QAAM,EAA/C,wBAIF,eAAC9H,EAAA,EAAD,CAAMC,WAAS,EAACiI,eAAe,WAA/B,UACE,cAAChF,EAAA,EAAD,CAAQ3F,QAAQ,WAAW8F,KAAK,SAC9BoC,MAAO,CAAEjI,MAAO,UAAW6K,OAAQ,kBAAmBrC,YAAa,QADrE,kDAKA,cAAC9C,EAAA,EAAD,CAAQ3F,QAAQ,WACd4K,QAAS,WAAKuF,OAAOC,SAASqB,UAC9BvJ,MAAO,CAAEjI,MAAO,UAAW6K,OAAQ,kBAAmBrC,YAAa,QAFrE,sCAMA,cAAC9C,EAAA,EAAD,CAAQ3F,QAAQ,WAAW4K,QA3DhB,WACnB1J,aAAa2J,WAAW,SACxB3J,aAAa2J,WAAW,YACxB3J,aAAa2J,WAAW,OACxBhJ,GAAQS,KAAK,WAwDH4F,MAAO,CAAEjI,MAAO,UAAW6K,OAAQ,mBADrC,kCAQN,iCAEE,cAAC9G,EAAA,EAAD,CACEpB,GAAI,CACFmG,QAAS,mBACTgC,GAAI,EACJC,GAAI,GAJR,SAOE,eAACC,EAAA,EAAD,CAAWC,SAAS,KAApB,UACE,eAACnL,EAAA,EAAD,CACE4C,UAAU,KACV3C,QAAQ,KACRE,MAAM,SACND,MAAM,eACNoI,cAAY,EALd,wDAOWV,EAASI,MAAM,uBAAMJ,EAASW,SAEzC,cAACvI,EAAA,EAAD,CAAYC,QAAQ,KAAKE,MAAM,SAASD,MAAM,iBAAiBsI,WAAS,EAAxE,SACGZ,EAASe,cAEZ,eAAC3I,EAAA,EAAD,CAAYC,QAAQ,YAAYE,MAAM,SAASD,MAAM,iBAArD,+BACM0H,EAAS+J,QADf,IACyB/J,EAASgK,KAAKA,KADvC,WACgDhK,EAASgK,KAAKjJ,YAAY,uBACvEd,GAAaD,MAEhB,cAAC5H,EAAA,EAAD,CAAYC,QAAQ,YAAYE,MAAM,SAASD,MAAM,UAAUsI,WAAS,EAAxE,SACGV,GAAWF,UAKlB,cAACsD,EAAA,EAAD,CAAWrI,GAAI,CAAEuI,GAAI,GAArB,SACI,cAAC1I,EAAA,EAAD,CAAMC,WAAS,EAAC0I,QAAS,EAAzB,SACKoF,EAAcnF,KAAI,SAACG,GAAD,OACf,cAACD,EAAD,CAEEC,UAAWA,EACXC,KAAM9D,EAASgK,KAAKlG,KACpBC,aAAcA,GACdC,eAAgBhE,EAAS1G,QAJpBuK,EAAU2C,YAS7B,cAACW,GAAD,CACEC,KAAM2B,EACNvL,KAAM8L,EAAkB9L,KACxB6J,QAASoC,GACTpH,QAAS4G,EACT3B,UAAWqC,KAEb,cAACxB,GAAD,CACEf,KAAM+B,EACNd,QAAQ,yYACR1H,MAAO8F,EACPY,QAASqC,GACTtB,OAAO,gCAGX,cAACjH,EAAD,OCtMS,SAAS8I,KACtB,OAEI,cADF,CACE,OAAKrP,UAAU,MAAf,UACE,cAAC,IAAD,CAAOsP,KAAK,SAASlP,UAAWf,IAChC,cAAC,IAAD,CAAOiQ,KAAK,YAAYlP,UAAW4E,IACnC,cAAC,IAAD,CAAOsK,KAAK,eAAelP,UAAWsN,KACtC,cAAC,IAAD,CAAO4B,KAAK,QAAQlP,UAAWiH,OC9BvC,IAYekI,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,SCAdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,KAAD,UACE,cAAC,GAAD,QAGJC,SAASC,eAAe,SAM1Bb,O","file":"static/js/main.275f2a53.chunk.js","sourcesContent":["import * as React from 'react';\nimport Typography from '@mui/material/Typography';\n\nexport default function Copyright() {\n    return (\n      <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\n        {'Copyright © '}\n          ntu-vote\n        {' '}\n        {new Date().getFullYear()}\n        {'.'}\n      </Typography>\n    );\n  }","const base_url = \"https://ntu-vote.ntu.im\";\n\n//protected\nexport const login = async(username, password) => {\n    const endpoint = base_url + \"/api/login\";\n    try{\n\n        const response = await fetch(endpoint, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                \"Content-type\": \"application/json\",\n                'Authorization': `bearer ${username}:${password}`\n            }\n        });\n        if (response.ok) {\n            const jsonResponse = await response.json();\n            if (jsonResponse.status === \"Success\"){\n                localStorage.setItem(\"token\", jsonResponse.params.token);\n                localStorage.setItem(\"username\", jsonResponse.params.username);\n                localStorage.setItem(\"uid\", jsonResponse.params.uid);\n                return \"success\"; //an-array\n            }\n            else{\n                alert(jsonResponse.message);\n                return \"fail\";\n            }\n        }\n        else{\n            alert(response.status + \" \" + response.statusText);\n            return \"fail\";\n        }\n    }\n    catch(e){\n        alert(\"登入失敗，請確認網路連線\");\n        return \"fail\";\n    }\n}","import * as React from 'react';\nimport { useHistory } from \"react-router\";\nimport Avatar from '@mui/material/Avatar';\nimport Button from '@mui/material/Button';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport TextField from '@mui/material/TextField';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\nimport Link from '@mui/material/Link';\nimport Paper from '@mui/material/Paper';\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\n// import LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport Typography from '@mui/material/Typography';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport Copyright from './Copyright';\nimport { login } from '../utility/login';\n\n\nconst theme = createTheme();\n\nexport default function SignInSide() {\n  const history = useHistory();\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    const result = await login(\n        data.get('username'),data.get('password')\n    );\n\n    if ( result === \"success\"){\n        history.push(\"/home\");\n    }\n  };\n\n  return (\n    <header className=\"App-header\">\n        <ThemeProvider theme={theme}>\n        <Grid container component=\"main\" sx={{ height: '100vh' }}>\n            <CssBaseline />\n            <Grid\n            item\n            xs={false}\n            sm={4}\n            md={7}\n            sx={{\n                backgroundImage: `url(${process.env.PUBLIC_URL}/background.jpg)`,\n                backgroundRepeat: 'no-repeat',\n                backgroundColor: (t) =>\n                t.palette.mode === 'light' ? t.palette.grey[50] : t.palette.grey[900],\n                backgroundSize: 'cover',\n                backgroundPosition: 'center',\n            }}\n            />\n            <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n            <Box\n                sx={{\n                my: 8,\n                mx: 4,\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                }}\n            >\n                <Avatar sx={{ m: 1}}>\n                {/* <LockOutlinedIcon /> */}\n                    <img src={process.env.PUBLIC_URL + '/favicon-32x32.png'} \n                        alt=\"sign-in-avatar-img\"\n                    /> \n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    登入\n                </Typography>\n                <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 1 }}>\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    id=\"username\"\n                    label=\"帳號名稱（英數組合）\"\n                    name=\"username\"\n                    autoComplete=\"username\"\n                    autoFocus\n                />\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    name=\"password\"\n                    label=\"密碼\"\n                    type=\"password\"\n                    id=\"password\"\n                    autoComplete=\"current-password\"\n                />\n                <FormControlLabel\n                    control={<Checkbox value=\"remember\" color=\"primary\" />}\n                    label=\"記住密碼\"\n                />\n                <Button\n                    type=\"submit\"\n                    fullWidth\n                    variant=\"contained\"\n                    sx={{ mt: 3, mb: 2 }}\n                >\n                    登入\n                </Button>\n                <Grid container>\n                    <Grid item xs>\n                    <Link href=\"#\" variant=\"body2\">\n                        忘記密碼?\n                    </Link>\n                    </Grid>\n                    <Grid item>\n                    <Link href=\"/register\" variant=\"body2\">\n                        {\"尚未有帳號? 註冊\"}\n                    </Link>\n                    </Grid>\n                </Grid>\n                <Copyright sx={{ mt: 5 }} />\n                </Box>\n            </Box>\n            </Grid>\n        </Grid>\n        </ThemeProvider>\n    </header>\n  );\n}","import * as openpgp from 'openpgp';\n\nexport const generateKey = async(passphrase, aName, aEmail) => {\n  console.log('generating keys...');\n  try{\n    const { privateKey, publicKey, revocationCertificate } = await openpgp.generateKey({\n      type: 'ecc', // Type of the key, defaults to ECC\n      curve: 'curve25519', // ECC curve name, defaults to curve25519\n      userIDs: [{ name: aName, email: aEmail }], // you can pass multiple user IDs\n      passphrase: passphrase, // protects the private key\n      format: 'armored' // output key format, defaults to 'armored' (other options: 'binary' or 'object')\n    });\n    return ({\n      'privateKeyArmored': privateKey,\n      'publicKeyArmored': publicKey,\n      'revoCert': revocationCertificate\n    });\n  }\n  catch(e){\n    // alert(\"generate keys: \" + e.message);\n    return \"fail\";\n  }\n}\n","import { generateKey } from \"./generateKey\";\nconst base_url = 'https://ntu-vote.ntu.im';//http://220.135.59.14:80\n\n//unprotected\nexport const register = async(username, password, display_name, real_name, student_id) => {\n    const aEmail = student_id + \"@ntu.edu.tw\";\n    const newKeyPair = await generateKey(password, username, aEmail);\n    const endpoint = base_url + \"/api/register\";\n    const data = JSON.stringify({\n        \"username\": username,                       // string, username\n        \"password\": password,                       // string, password\n        \"display_name\": display_name,               // string, display name\n        \"real_name\": real_name,                     // string, real_name\n        \"student_id\": student_id,                   // string, student id\n        \"public_key\": newKeyPair.publicKeyArmored, // string, public key\n        \"private_key\": newKeyPair.privateKeyArmored  // string, password-signed private key\n    });\n    const response = await fetch(endpoint, {\n        method: \"POST\",\n        body: data,\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-type\": \"application/json\",\n        }\n    });\n    if (response.ok) {\n        const jsonResponse = await response.json();\n        if (jsonResponse.status === \"Success\"){\n            return \"success\";\n        }\n        else{\n            alert(jsonResponse.message);\n            return \"fail\";\n        }\n    }\n    else{\n        alert(response.status + \" \" + response.statusText);\n        return \"fail\";\n    }\n}\n\n","import * as React from 'react';\nimport { useHistory } from \"react-router\";\nimport Avatar from '@mui/material/Avatar';\nimport Button from '@mui/material/Button';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport TextField from '@mui/material/TextField';\nimport Link from '@mui/material/Link';\nimport Paper from '@mui/material/Paper';\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\n// import LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport Typography from '@mui/material/Typography';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport Copyright from './Copyright';\nimport { register } from '../utility/register';\n\nconst theme = createTheme();\n\nexport default function SignUpSide() {\n  const history = useHistory();\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n\n    //test student id format\n    const validStudentId = /^[a-z]{1}[0-9]{8}$/;\n    const isvalidStudentId = validStudentId.test(data.get('studentId'));\n    if(!isvalidStudentId){\n        alert(\"學號格式不符\");\n        return;  \n    }\n\n    //test username format\n    const validUsername = /^[A-Za-z0-9]+$/;\n    const isValidUsername = validUsername.test(data.get('username'));\n    if(!isValidUsername){\n        alert(\"用戶名稱格式不符\");\n        return;  \n    }\n\n    //register\n    const result = await register(data.get('username'), data.get('password'),\n    data.get('displayName'), data.get('realName'),\n    data.get('studentId'));\n    if(result === \"success\"){\n        alert(\"註冊成功\");\n        history.push(\"/login\");\n    }\n  };\n\n  return (\n    <header className=\"App-header\">\n        <ThemeProvider theme={theme}>\n        <Grid container component=\"main\" sx={{ height: '100vh' }}>\n            <CssBaseline />\n            <Grid\n            item\n            xs={false}\n            sm={4}\n            md={7}\n            sx={{\n                backgroundImage: `url(${process.env.PUBLIC_URL}/background_clear.jpg)`,\n                backgroundRepeat: 'no-repeat',\n                backgroundColor: (t) =>\n                t.palette.mode === 'light' ? t.palette.grey[50] : t.palette.grey[900],\n                backgroundSize: 'cover',\n                backgroundPosition: 'center',\n            }}\n            />\n            <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n            <Box\n                sx={{\n                my: 8,\n                mx: 4,\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                }}\n            >\n                <Avatar sx={{ m: 1 }}>\n                {/* <LockOutlinedIcon /> */}\n                    <img src={process.env.PUBLIC_URL + '/favicon-32x32.png'} \n                        alt=\"sign-up-avatar-img\"\n                    /> \n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    註冊\n                </Typography>\n                <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 1 }}>\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    id=\"username\"\n                    label=\"帳號名稱 （以後登入使用，請記得您的帳號名稱）（英數組合）\"\n                    name=\"username\"\n                    autoComplete=\"username\"\n                    autoFocus\n                />\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    id=\"displayName\"\n                    label=\"暱稱\"\n                    name=\"displayName\"\n                    autoComplete=\"displayName\"\n                />\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    id=\"realName\"\n                    label=\"真實姓名\"\n                    name=\"realName\"\n                    autoComplete=\"realName\"\n                />\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    id=\"studentId\"\n                    label=\"學號（開頭小寫 e.g. b01001001）\"\n                    name=\"studentId\"\n                    autoComplete=\"studentId\"\n                />\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    name=\"password\"\n                    label=\"密碼\"\n                    type=\"password\"\n                    id=\"password\"\n                    autoComplete=\"current-password\"\n                />\n                <Button\n                    type=\"submit\"\n                    fullWidth\n                    variant=\"contained\"\n                    sx={{ mt: 3, mb: 2}}\n                >\n                    註冊\n                </Button>\n                <Grid container>\n                    <Grid item xs>\n                    </Grid>\n                    <Grid item>\n                    <Link href=\"/login\" variant=\"body2\">\n                        {\"已經註冊過帳號了嗎? 登入\"}\n                    </Link>\n                    </Grid>\n                </Grid>\n                <Copyright sx={{ mt: 5 }} />\n                </Box>\n            </Box>\n            </Grid>\n        </Grid>\n        </ThemeProvider>\n    </header>\n  );\n}","import * as React from 'react';\nimport Card from '@mui/material/Card';\nimport CardActionArea from '@mui/material/CardActionArea';\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\n\n\nexport default function SecondaryCampaignCard(props) {\n    const { campaign, showDuration, showResult } = props;\n    const redirectUri = \"/voteStation?cpnId=\"+ campaign.cpnId;\n    return (\n      <Grid item xs={12} md={12}>\n        <CardActionArea component=\"a\" href={redirectUri}>\n          <Card sx={{ display: 'flex' }} style={{backgroundColor: \"#F8F8F8\"}}>\n            <CardContent sx={{ flex: 1 }}>\n              <Typography component=\"h2\" variant=\"h3\" gutterBottom>\n                {campaign.title}\n              </Typography>\n              <Typography variant=\"h5\" paragraph sx={{ marginLeft: \"40px\", marginRight: \"40px\" }}>\n                {campaign.description}\n              </Typography>\n              <Typography variant=\"subtitle1\" paragraph>\n                {/* 規則：{campaign.cpnr_id} {campaign.rule.rule} — {campaign.rule.description}<br/> */}\n                {showDuration(campaign)}\n              </Typography>\n              <Typography variant=\"subtitle1\" color=\"#D70040\" paragraph>\n                {showResult(campaign)}\n              </Typography>\n            </CardContent>\n            <CardMedia\n              component=\"img\"\n              sx={{ width: 160, display: { xs: 'block', sm: 'block' } }}\n              image=\"https://source.unsplash.com/random\"\n              alt=\"secondary-campaign-img\"\n            />\n          </Card>\n        </CardActionArea>\n      </Grid>\n    );\n  }","import * as React from 'react';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport Copyright from './Copyright';\n \nexport default function Footer(){\n    return(\n        <Box sx={{ bgcolor: 'background.paper', p: 6 }} component=\"footer\">\n        <Typography\n          variant=\"subtitle1\"\n          align=\"center\"\n          color=\"text.secondary\"\n          component=\"p\"\n        >\n          測試版 Open Beta\n        </Typography>\n        <Copyright />\n      </Box>\n    );\n}","import * as React from 'react';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\n\nexport default function Header(props) {\n    return (\n        <Paper\n        sx={{\n            position: 'relative',\n            backgroundColor: 'grey.800',\n            color: '#fff',\n            mb: 4,\n            backgroundSize: 'cover',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center',\n            backgroundImage: `url(https://source.unsplash.com/random)`,\n        }}\n        >\n        {<img style={{ display: 'none' }} \n            src=\"url(https://source.unsplash.com/random)\"\n            alt=\"primary-campaign-img\"/>}\n        <Box\n            sx={{\n            position: 'absolute',\n            top: 0,\n            bottom: 0,\n            right: 0,\n            left: 0,\n            backgroundColor: 'rgba(0,0,0,.3)'\n            }}\n        />\n        <Grid container>\n            <Grid item md={6}>\n            <Box\n                sx={{\n                position: 'relative',\n                p: { xs: 3, md: 6 },\n                pr: { md: 0 }\n                }}\n            >\n            </Box>\n            </Grid>\n        </Grid>\n        </Paper>\n    );\n}","const base_url = 'https://ntu-vote.ntu.im';\n\n//Protected\nexport const getCampaignList = async() => {\n    const endpoint = base_url + \"/api/campaign\";\n    console.log(\"get campaign list...\");\n    try{\n        const response = await fetch(endpoint, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                \"Content-type\": \"application/json\",\n                'Authorization': `bearer ${localStorage.getItem(\"username\")}:${localStorage.getItem(\"token\")}`\n            }\n        });\n        if (response.ok) {\n            const jsonResponse = await response.json();\n            if (jsonResponse.status === \"Success\"){\n                return jsonResponse.result.campaigns; //an-array\n            }\n            else{\n                alert(jsonResponse.message);\n                return \"fail\";\n            }\n        }\n        else{\n            alert(response.status + \" \" + response.statusText);\n            return \"fail\";\n        }\n    }\n    catch(e){\n        alert(\"home page 已達登入時間上限，為確保隱私安全，麻煩您在登入一次喔\")\n        return \"fail\";\n    }\n}","import * as React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useHistory } from \"react-router\";\nimport AppBar from '@mui/material/AppBar';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport SecondaryCampaignCard from './SecondaryCampaignCard';\nimport Footer from './Footer';\nimport Header from './Header';\nimport { getCampaignList } from '../utility/getCampaignList'; \n// import PrimaryCampaignCard from './PrimaryCampaignCard';\n// import Card from '@mui/material/Card';\n// import CardActionArea from '@mui/material/CardActionArea';\n// import CardContent from '@mui/material/CardContent';\n// import CardMedia from '@mui/material/CardMedia';\n\nconst theme = createTheme();\n\nexport default function Campaigns() {\n  const [campaignList, setCampaignList] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n\n  const showResult = (campaign) =>{\n    if (campaign.status === \"ended\"){\n      return(\n          `最高得票數：${campaign.result} 票`\n      )\n    }\n  }\n  const showDuration = (campaign) =>{\n    if (campaign.status === \"ended\"){\n      return(\n        \"投票已結束\"\n      );\n    }\n    else{\n      return(\n        `投票期限：${campaign.startTime.slice(0, -7)} 到 ${campaign.endTime.slice(0, -7)}`\n      );\n    }\n  }\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"username\");\n    localStorage.removeItem(\"uid\");\n    history.push(\"/login\");\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    (async() => { \n      const campaigns = await getCampaignList();\n      if (campaigns === \"fail\"){\n        history.push(\"/login\")\n      }\n      else{\n        setCampaignList(campaigns);\n      }\n      setLoading(false);\n    })()\n  }, [history]);\n\n  if (loading){\n    return(\n      \"\"\n    );\n  }\n  if (campaignList.length === 0){\n    return(\n      <Typography variant=\"h6\" color=\"inherit\" noWrap>\n        現在沒有任何投票活動喔！\n      </Typography>\n    );\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <AppBar position=\"relative\" style={{ background: '#000000' }}>\n        <Toolbar>\n          <Grid container justifyContent=\"flex-start\">\n            <Typography variant=\"h6\" color=\"inherit\" noWrap>\n              NTU VOTE\n            </Typography>\n          </Grid>\n          <Grid container justifyContent=\"flex-end\">           \n            <Button variant=\"outlined\" onClick={handleLogout}\n              style={{ color: '#ffffff', border: \"2px white solid\" }}\n            >\n              登出\n            </Button> \n          </Grid>         \n        </Toolbar>\n      </AppBar>\n      <main>\n        <Header/>\n        {/* primary */}\n        {/* <PrimaryCampaignCard\n          campaign={campaignList[0]}\n          showDuration={showDuration}\n          showResult={showResult}\n        /> */}\n        {/* header */}\n        <Box\n          sx={{\n            bgcolor: 'background.paper',\n            pt: 8,\n            pb: 6,\n          }}\n        >\n          <Container maxWidth=\"sm\">\n            <Typography\n              component=\"h1\"\n              variant=\"h2\"\n              align=\"center\"\n              color=\"text.primary\"\n              gutterBottom\n            >\n              NTU VOTE <br/>台大專屬投票平台\n            </Typography>\n            <Typography variant=\"h5\" align=\"center\" color=\"text.secondary\" paragraph>\n              擇你所愛，愛你所選！模擬公投火熱進行中！\n            </Typography>\n          </Container>\n        </Box>\n        {/* secondary */}\n        <Container sx={{ py: 8 }}>\n          <Grid container spacing={4}>\n            {campaignList.slice(0).map((campaign) => (\n              <SecondaryCampaignCard\n                key={campaign.cpn_id}\n                campaign={campaign}\n                showDuration={showDuration}\n                showResult={showResult}\n              />\n            ))}\n          </Grid>\n        </Container>\n        {/* <Container sx={{ py: 8 }}>\n          <Grid container spacing={4}>\n          {campaignList.slice(1).map((campaign) => {\n              const redirectUri = \"/voteStation?cpnId=\"+ campaign.cpnId;\n              return(\n                <Grid item key={campaign.title} xs={12} sm={6} md={4}>\n                  <CardActionArea component=\"a\" href={redirectUri}>\n                    <Card\n                    sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}\n                    style={{backgroundColor: \"#F8F8F8\"}}\n                    >\n                      <CardMedia\n                          component=\"img\"\n                          sx={{\n                          pt: '0%',\n                          }}\n                          image=\"https://source.unsplash.com/random\"\n                          alt=\"tertiary-campaign-img\"\n                      />\n                      <CardContent sx={{ flexGrow: 1 }}>\n                        <Typography component=\"h2\" variant=\"h3\" gutterBottom>\n                          {campaign.title}\n                        </Typography>\n                        <Typography variant=\"h5\" paragraph sx={{ marginLeft: \"40px\", marginRight: \"40px\" }}>\n                          {campaign.description}\n                        </Typography>\n                        <Typography variant=\"subtitle1\" paragraph>\n                          {showDuration(campaign)}\n                        </Typography>\n                        <Typography variant=\"subtitle1\" color=\"#D70040\" paragraph>\n                          {showResult(campaign)}\n                        </Typography>\n                      </CardContent>\n                    </Card>\n                  </CardActionArea>\n                </Grid>\n              )\n          })}\n          </Grid>\n        </Container> */}\n      </main>\n      <Footer/>\n    </ThemeProvider>\n  );\n}\n\n\n\n","import * as React from 'react';\nimport { Fragment } from \"react\";\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\n\nexport default function CandidateCard(props) {\n    const { candidate, live, handleSelect, campaignStatus } = props;\n\n    return (\n      <Grid item xs={12} md={12}>\n        <Card sx={{ display: 'flex' }} style={{backgroundColor: \"#F8F8F8\"}}>\n          <CardMedia\n            component=\"img\"\n            sx={{ width: 160, display: { xs: 'block', sm: 'block' } }}\n            image=\"https://source.unsplash.com/random\"\n          />\n          <CardContent sx={{ flex: 1 }}>\n            \n            <Typography variant=\"h3\" gutterBottom>\n              {candidate.name}\n            </Typography>\n\n            <Typography variant=\"h6\" gutterBottom>\n              {candidate.description}\n            </Typography>\n\n            {candidate.policies.map((policy, idx)=>(\n              <Fragment>\n                <Typography variant=\"h5\" paragraph inline=\"true\" align=\"left\" paddingLeft=\"20px\">\n                  {idx+1} {policy.title}\n                </Typography>\n                <Typography paragraph inline=\"true\" align=\"left\">\n                  {policy.description}\n                </Typography>\n              </Fragment>\n            ))}\n\n            {live && (\n              <Typography variant=\"subtitle1\" paragraph color=\"#D70040\">\n                得票數：{candidate.ballots} 票\n              </Typography>\n            )}\n            {(campaignStatus !== \"ended\") &&(\n              <Button variant=\"outline\" size=\"large\" \n                style={{ color: '#000000', border: \"2px black solid\" }}\n                onClick={ () => { handleSelect(candidate); } }\n              >\n                投票\n              </Button>\n            )}\n          </CardContent>\n        </Card>\n      </Grid>\n    );\n  }","const base_url = 'https://ntu-vote.ntu.im';\n\n//Protected\nexport const getCandidateList = async(cpnId) => {\n    const endpoint = base_url + \"/api/campaign/\" + cpnId;\n    console.log(\"get candidate list...\");\n    try{\n        const response = await fetch(endpoint, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                \"Content-type\": \"application/json\",\n                'Authorization': `bearer ${localStorage.getItem(\"username\")}:${localStorage.getItem(\"token\")}`\n            }\n        });\n    \n        if (response.ok) {\n            const jsonResponse = await response.json();\n            if (jsonResponse.status === \"Success\"){\n                return jsonResponse.result; //an-object\n            }\n            else{\n                alert(jsonResponse.message);\n                return \"fail\";\n            }\n        }\n        else{\n            alert(response.status + \" \" + response.statusText);\n            return \"fail\";\n        }\n    }\n    catch(e){\n        alert(\"vote station 已達登入時間上限，為確保隱私安全，麻煩您在登入一次喔\")\n        return \"fail\";\n    }\n}","import * as openpgp from 'openpgp';\n\nexport const signMsg = async(keyPair, passphrase, aMessage) =>{ \n    console.log('signing messages...');\n    const _publicKey = await openpgp.readKey({\n      armoredKey: keyPair.pubKey\n    });\n\n    const _privateKey = await openpgp.decryptKey({\n        privateKey: await openpgp.readPrivateKey({\n          armoredKey: keyPair.prvKey\n        }),\n        passphrase\n    });\n\n    const unsignedMessage = await openpgp.createCleartextMessage({ text: aMessage });\n    const cleartextMessage = await openpgp.sign({\n        message: unsignedMessage, // CleartextMessage or Message object\n        signingKeys: _privateKey\n    });\n    \n    const signedMessage = await openpgp.readCleartextMessage({\n      cleartextMessage // parse armored message\n    });\n    \n    const verificationResult = await openpgp.verify({\n      message: signedMessage,\n      verificationKeys: _publicKey\n    });\n\n    const { verified, keyID } = verificationResult.signatures[0];\n    try {\n        await verified; // throws on invalid signature\n        return(cleartextMessage);\n    } catch (e) {\n        console.log(\"sign by key id: \", keyID);\n        throw new Error('Signature could not be verified: ' + e.message);\n    }\n}","export const generateRandomStr = (length) =>{\n  console.log(\"generating random string...\")\n  let result = '';\n  let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let charactersLength = characters.length;\n  for ( let i = 0; i < length; i++ ) {\n    result += characters.charAt(Math.floor(Math.random() * \n      charactersLength));\n  }\n  return result;\n}","const base_url = 'https://ntu-vote.ntu.im';\n\n//Unprotected\nexport const getVoterKey = async() => {\n    console.log(\"get voter keys...\");\n\n    try{\n        const endpoint = base_url + \"/api/ballot/key\";\n        const response = await fetch(endpoint, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                \"Content-type\": \"application/json\",\n                'Authorization': `bearer ${localStorage.getItem(\"username\")}:${localStorage.getItem(\"token\")}`\n            }\n        });\n    \n        if (response.ok) {\n            const jsonResponse = await response.json();\n            if (jsonResponse.status === \"Success\"){\n                return jsonResponse.result; //an-object\n            }\n            else{\n                alert(jsonResponse.message);\n                return \"fail\";\n            }\n        }\n        else{\n            alert(response.status + \" \" + response.statusText);\n            return \"fail\";\n        }\n    }\n    catch(e){\n        // alert(\"get voter keys: \" + e.message);\n        return \"fail\";\n    }\n}","import { signMsg } from \"./signMsg\";\nimport { generateRandomStr } from \"./generateRandomStr\";\nimport { getVoterKey } from \"./getVoterKey\";\n\nconst base_url = 'https://ntu-vote.ntu.im';\n\n//unprotected\nexport const castBallot = async(cpnId, cid, password) => {\n    console.log('casting ballots...');\n    try{\n        const veriStr = generateRandomStr(5);\n        const keyPair = await getVoterKey();\n        const votedMsg = `VOTED:${localStorage.getItem(\"uid\")}:${cpnId}`;\n        const ballotMsg = `BALLOT:${veriStr}:${cpnId}:${cid}`;\n        const votedProof = await signMsg(keyPair, password, votedMsg);\n        const ballotProof = await signMsg(keyPair, password, ballotMsg);\n        const endpoint = base_url + \"/api/ballot/cast\";\n        const data = JSON.stringify(\t{\n            \"cpnId\": cpnId,            // number, campaign id\n            \"cid\": cid,                // number, candidate id\n            \"votedProof\": votedProof,  // string, voted proof\n            \"ballotProof\": ballotProof // string, ballot proof\n        });\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            body: data,\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-type\": \"application/json\",\n                'Authorization': `bearer ${localStorage.getItem(\"username\")}:${localStorage.getItem(\"token\")}`\n            }\n        });\n\n        if (response.ok) {\n            const jsonResponse = await response.json();\n            if (jsonResponse.status === \"Success\"){\n                return veriStr;\n            }\n            else{\n                alert(jsonResponse.message);\n                if(jsonResponse.message === \"ERR_JWT_EXPIRED\"){\n                    alert(\"已達登入時間上限，為確保隱私安全，麻煩您在登入一次喔\");\n                    return \"expired\";\n                }\n                if(jsonResponse.message === \"ERR_VOTER_ALREADY_VOTED\"){\n                    alert(\"一人一票，您已投過此場活動\");\n                }\n                return \"fail\";\n            }\n        }\n        else{ //404 not found, db crash\n            alert(response.status + \" \" + response.statusText);\n            return \"fail\";\n        }\n    }\n    catch (e) {\n        // alert(\"casting ballot: \" + e.message);\n        return \"fail\";\n    }\n}\n\n","import React from \"react\";\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Box from '@mui/material/Box';\n\nconst styles = {\n  color: \"#ffffff\"\n};\n\nexport default function ButtonCircularProgress(props) {\n  const { size } = props;\n  return (\n    <Box color=\"secondary.main\" pl={1.5} display=\"flex\">\n      <CircularProgress\n        sx={{...styles}}\n        size={size ? size : 24}\n        thickness={size ? (size / 5) * 24 : 5}\n      />\n    </Box>\n  );\n}\n//  default withStyles(styles, { withTheme: true })(ButtonCircularProgress);\n","import React, { useRef } from \"react\";\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport ButtonCircularProgress from \"./ButtonCircularProgress\";\nimport TextField from '@mui/material/TextField';\nimport Stack from '@mui/material/Stack';\n\nexport default function ConfirmationDialog(props) {\n  const { open, onClose, loading, name, onConfirm } = props;\n  const password = useRef();\n  const handleConfirm = () =>{\n    onConfirm(password.current.value)\n  }\n  \n  return (\n      <Dialog\n      open={open}\n      onClose={onClose}\n      disableEscapeKeyDown={loading}\n      >\n      <DialogTitle>投票確認</DialogTitle>\n      <DialogContent>\n          <DialogContentText>確定要投{name}嗎？若是，請輸入密碼於下方：</DialogContentText>\n          <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"密碼\"\n              inputRef={password}\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n          />\n      </DialogContent>\n      <DialogActions>\n        <Stack\n          sx={{ pt: 4 }}\n          direction=\"row\"\n          spacing={2}\n          justifyContent=\"center\"\n        >\n          <Button \n            variant=\"contained\"\n            onClick={handleConfirm}\n            disabled={loading}\n            style={{ background: '#000000' }}\n          >\n            確認投票 {loading && <ButtonCircularProgress />}\n          </Button>\n          <Button \n            variant=\"outlined\"\n            onClick={onClose} \n            disabled={loading} \n            style={{ color: '#000000', border: \"2px black solid\" }}\n          >\n            關閉\n          </Button>\n        </Stack>\n      </DialogActions>\n      </Dialog>\n  );\n}","import React from \"react\";\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\n\nexport default function VeriDialog(props) {\n  const { open, onClose, title, action, content} = props;\n  \n  return (\n      <Dialog\n      open={open}\n      onClose={onClose}\n      >\n      <DialogTitle>隨機驗證碼：{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{content}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button \n          variant=\"contained\"\n          onClick={onClose}\n          style={{ background: '#000000' }}\n        >\n          {action}\n        </Button>\n      </DialogActions>\n      </Dialog>\n  );\n}","import * as React from 'react';\nimport { useState, useEffect, useCallback } from 'react';\nimport { useHistory } from \"react-router\";\nimport AppBar from '@mui/material/AppBar';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport Container from '@mui/material/Container';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport CandidateCard from './CandidateCard';\nimport Footer from './Footer';\nimport { getCandidateList } from '../utility/getCandidateList'\nimport { castBallot } from '../utility/castBallot'\nimport ConfirmationDialog from './ConfirmationDialog';\nimport VeriDialog from './VeriDialog';\n\nconst theme = createTheme();\n\nexport default function VoteStation(props) {\n  const currentUrl = window.location;\n  const cpnId = new URLSearchParams(currentUrl.search).get('cpnId');\n  const [campaign, setCampaign] = useState(null);\n  const [candidateList, setCandidateList] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isDialogLoading, setIsDialogLoading] = useState(false);\n  const [isVeriDialogOpen, setIsVeriDialogOpen] = useState(false);\n  const [veriStr, setVeriStr] = useState(false);\n  const [selectedCandidate, setSelectedCandidate] = useState({name:\"default\"});\n\n  const history = useHistory();\n\n  const showResult = useCallback((campaign) =>{\n    if (campaign.status === \"ended\"){\n      return(\n          `最高得票數：${campaign.result} 票`\n      )}\n    }, []\n  )\n\n  const showDuration = useCallback((campaign) =>{\n    if (campaign.status === \"ended\"){\n      return(\n        \"投票已結束\"\n      );\n    }\n    else{\n      return(\n        `投票期限：${campaign.startTime.slice(0, -7)} 到 ${campaign.endTime.slice(0, -7)}`\n      );\n    }},[]\n  );\n\n  const handleSelect = useCallback((candidate) =>{\n    setIsDialogOpen(true);\n    setSelectedCandidate(candidate);\n    }, [setIsDialogOpen, setSelectedCandidate]\n  );\n\n  \n  const closeDialog = useCallback(() => {\n    setIsDialogOpen(false);\n    setIsDialogLoading(false);\n  }, [setIsDialogOpen, setIsDialogLoading]\n  );\n\n  const closeVeriDialog = useCallback(() => {\n    setIsVeriDialogOpen(false);\n  }, []\n  );\n  \n  const handleCastBallot = useCallback((password) =>{\n    (async() => {\n      setIsDialogLoading(true);\n      const veriStr = await castBallot(campaign.cpnId, selectedCandidate.cid, password);\n      closeDialog();\n      if(veriStr === \"fail\"){\n        alert(\"投票失敗\");\n      }\n      else if(veriStr === \"expired\"){\n        history.push(\"/login\");\n      }\n      else{\n        alert(\"投票成功!\");\n        setVeriStr(veriStr);\n        setIsVeriDialogOpen(true);\n      }\n    })()\n    }, [selectedCandidate, closeDialog]\n  );\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"username\");\n    localStorage.removeItem(\"uid\");\n    history.push(\"/login\");\n  };\n  \n  useEffect(() => {\n    (async() => { \n      setLoading(true);\n      const result = await getCandidateList(cpnId);\n      if (result === \"fail\"){\n        history.push(\"/login\");\n      }\n      else{\n        let {candidates, ...campaignInfo} = result.campaign;\n        setCampaign(campaignInfo);\n        setCandidateList(candidates);\n      }\n      setLoading(false);\n    })()\n  }, [cpnId, history]);\n\n  if (loading){\n    return(\n      \"\"\n    );\n  }\n\n  if (candidateList.length === 0){\n    return(\n      <Typography variant=\"h6\" color=\"inherit\" noWrap>\n        目前尚未公布詳細資訊，請過幾天再來看看吧！\n      </Typography>\n    );\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <AppBar position=\"relative\" style={{ background: '#000000' }}>\n        <Toolbar>\n          <Grid container justifyContent=\"flex-start\">\n            <Typography variant=\"h6\" color=\"inherit\" noWrap>\n              NTU VOTE\n            </Typography>\n          </Grid>\n          <Grid container justifyContent=\"flex-end\">\n            <Button variant=\"outlined\" href='./home' \n              style={{ color: '#ffffff', border: \"2px white solid\", marginRight: \"10px\" }}\n            >\n              回到活動列表\n            </Button>\n            <Button variant=\"outlined\"\n              onClick={()=>{window.location.reload();}}\n              style={{ color: '#ffffff', border: \"2px white solid\", marginRight: \"10px\" }}\n            >\n              重整頁面\n            </Button>\n            <Button variant=\"outlined\" onClick={handleLogout}\n              style={{ color: '#ffffff', border: \"2px white solid\" }}\n            >\n              登出\n            </Button> \n          </Grid>         \n        </Toolbar>\n      </AppBar>\n      <main>\n        {/* header */}\n        <Box\n          sx={{\n            bgcolor: 'background.black',\n            pt: 8,\n            pb: 6,\n          }}\n        >\n          <Container maxWidth=\"sm\">\n            <Typography\n              component=\"h1\"\n              variant=\"h4\"\n              align=\"center\"\n              color=\"text.primary\"\n              gutterBottom\n            >\n              投票活動編號： {campaign.cpnId}<br/>{campaign.title}\n            </Typography>\n            <Typography variant=\"h5\" align=\"center\" color=\"text.secondary\" paragraph>\n              {campaign.description}\n            </Typography>\n            <Typography variant=\"subtitle1\" align=\"center\" color=\"text.secondary\">\n              規則：{campaign.cpnr_id} {campaign.rule.rule} — {campaign.rule.description}<br/>\n              {showDuration(campaign)}\n            </Typography>\n            <Typography variant=\"subtitle1\" align=\"center\" color=\"#D70040\" paragraph>\n              {showResult(campaign)}\n            </Typography>\n          </Container>\n        </Box>\n        {/* secondary */}\n        <Container sx={{ py: 8 }}>\n            <Grid container spacing={4}>\n                {candidateList.map((candidate) => (\n                    <CandidateCard\n                      key={candidate.cid}\n                      candidate={candidate}\n                      live={campaign.rule.live}\n                      handleSelect={handleSelect}\n                      campaignStatus={campaign.status}\n                    />\n                ))}\n            </Grid>\n        </Container>\n        <ConfirmationDialog\n          open={isDialogOpen}\n          name={selectedCandidate.name}\n          onClose={closeDialog}\n          loading={isDialogLoading}\n          onConfirm={handleCastBallot}\n        />\n        <VeriDialog\n          open={isVeriDialogOpen}\n          content=\"上方為您的隨機驗證碼，由於此平台使用匿名投票，往後若您需驗票，請記下此組隨機驗證碼並聯絡我們。為了您的隱私，請勿將此組密碼告訴他人\"\n          title={veriStr}\n          onClose={closeVeriDialog}\n          action=\"我知道了\"\n        />\n      </main>\n      <Footer/>\n    </ThemeProvider>\n  );\n}\n\n\n\n","import './App.css';\nimport React from 'react';\nimport { Route } from 'react-router-dom';\n// import { useState, useEffect } from 'react';\n// import { generate, sign } from './component/key-utility';\nimport SignInSide from './component/SignInSide';\nimport SignUpSide from './component/SignUpSide';\nimport Campaigns from './component/Campaigns';\nimport VoteStation from './component/VoteStation';\n\n\n// const [generateKeys, setGenerateKeys] = useState(\"\");\n// const [signedMessage, setSignedMessage] = useState(\"\");\n\n// useEffect(() => {\n//   (async() => { \n//     const newKeyPair = await generate(); \n//     setGenerateKeys(newKeyPair);\n//     const newSignedMessage = await sign(newKeyPair);\n//     setSignedMessage(newSignedMessage);\n//   })()\n// }, []);\n\nexport default function App(){\n  return (\n    // <Router> \n      <div className=\"App\">\n        <Route path=\"/login\" component={SignInSide} />\n        <Route path=\"/register\" component={SignUpSide} />\n        <Route path=\"/voteStation\" component={VoteStation} />\n        <Route path=\"/home\" component={Campaigns} />\n      </div>\n    // </Router>\n  );\n}\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter as Router} from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}